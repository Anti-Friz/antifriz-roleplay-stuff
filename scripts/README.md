# Build Scripts

## build-release.ps1

–ê–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–∏–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ä–µ–ª—ñ–∑—É –º–æ–¥—É–ª—è Foundry VTT.

### –§—É–Ω–∫—Ü—ñ—ó

- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —ñ–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞—Ü—ñ—è patch –≤–µ—Ä—Å—ñ—ó (0.0.x)
- ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–Ω—è `module.json`
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Git commit —ñ tag
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π push –¥–æ GitHub**
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞—Ä—Ö—ñ–≤—É `module.zip`
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è GitHub —Ä–µ–ª—ñ–∑—É (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

### –ü–æ—Ä—è–¥–æ–∫ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è

1. –Ü–Ω–∫—Ä–µ–º–µ–Ω—Ç—É—î –≤–µ—Ä—Å—ñ—é –≤ `module.json`
2. –°—Ç–≤–æ—Ä—é—î Git commit `"Release v0.0.x"`
3. –°—Ç–≤–æ—Ä—é—î Git tag `v0.0.x`
4. **–ü—É—à–∏—Ç—å –∑–º—ñ–Ω–∏ –¥–æ GitHub** (`git push && git push --tags`)
5. –ó–±—É–¥–æ–≤—É—î `module.zip`
6. (–û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ) –°—Ç–≤–æ—Ä—é—î GitHub Release –∑ –∞—Ä—Ö—ñ–≤–æ–º

---

### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

#### –ë–∞–∑–æ–≤–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è (–ø–æ–≤–Ω–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π —Ä–µ–ª—ñ–∑)

```powershell
.\scripts\build-release.ps1
```

**–©–æ —Ä–æ–±–∏—Ç—å:**
1. –Ü–Ω–∫—Ä–µ–º–µ–Ω—Ç—É—î patch –≤–µ—Ä—Å—ñ—é (0.0.1 ‚Üí 0.0.2)
2. –û–Ω–æ–≤–ª—é—î `module.json`
3. –°—Ç–≤–æ—Ä—é—î commit —ñ tag
4. **–ü—É—à–∏—Ç—å –¥–æ GitHub**
5. –°—Ç–≤–æ—Ä—é—î `module.zip`

**–ü—ñ—Å–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è:**
- –í–µ—Ä—Å—ñ—è –æ–Ω–æ–≤–ª–µ–Ω–∞ —ñ –∑–∞–ø—É—à–µ–Ω–∞ ‚úÖ
- –ê—Ä—Ö—ñ–≤ –≥–æ—Ç–æ–≤–∏–π ‚úÖ
- GitHub release –º–æ–∂–Ω–∞ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –æ–∫—Ä–µ–º–æ

---

#### –ü–æ–≤–Ω–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π —Ä–µ–ª—ñ–∑ –∑ GitHub Release

```powershell
.\scripts\build-release.ps1 -CreateGitHubRelease
```

**–í–∏–º–æ–≥–∏:**
- –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π [GitHub CLI](https://cli.github.com/)
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è: `gh auth login`

**–©–æ —Ä–æ–±–∏—Ç—å:**
1. –í—Å–µ –∑ –±–∞–∑–æ–≤–æ–≥–æ –≤–∞—Ä—ñ–∞–Ω—Ç—É
2. **–ü—É—à–∏—Ç—å –∑–º—ñ–Ω–∏**
3. –°—Ç–≤–æ—Ä—é—î GitHub Release
4. –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î `module.zip` –¥–æ —Ä–µ–ª—ñ–∑—É

**üéâ –ü—ñ—Å–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –º–æ–¥—É–ª—å –ø–æ–≤–Ω—ñ—Å—Ç—é –≤–∏–ø—É—â–µ–Ω–∏–π!**

---

#### –ó –∫–∞—Å—Ç–æ–º–Ω–∏–º–∏ release notes

```powershell
$notes = @"
## ‚ú® –ù–æ–≤—ñ —Ñ—ñ—á—ñ
- –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ permissions
- Dual volume controls (GM + Players)
- Broadcast target selector

## üêõ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è
- –í–∏–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∑—É–ø–∏–Ω—Ü—ñ –º—É–∑–∏–∫–∏
- Broadcast dropdown —Ç–µ–ø–µ—Ä –ø—Ä–∞—Ü—é—î –∫–æ—Ä–µ–∫—Ç–Ω–æ

## üìö –¢–µ—Ö–Ω—ñ—á–Ω–µ
- –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ broadcast —Å–∏—Å—Ç–µ–º–∏
- –î–æ–¥–∞–Ω–æ —É—Ç–∏–ª—ñ—Ç–∏ –¥–ª—è –¥—ñ–∞–ª–æ–≥—ñ–≤ —Ç–∞ FilePicker
"@

.\scripts\build-release.ps1 -CreateGitHubRelease -ReleaseNotes $notes
```

---

#### –ë–µ–∑ —ñ–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞—Ü—ñ—ó –≤–µ—Ä—Å—ñ—ó

```powershell
.\scripts\build-release.ps1 -NoVersionBump
```

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π —è–∫—â–æ –≤–∂–µ –≤—Ä—É—á–Ω—É –æ–Ω–æ–≤–∏–≤ –≤–µ—Ä—Å—ñ—é –∞–±–æ –ø—Ä–æ—Å—Ç–æ —Ö–æ—á–µ—à –ø–µ—Ä–µ—Å—Ç–≤–æ—Ä–∏—Ç–∏ –∞—Ä—Ö—ñ–≤.

---

#### –ë–µ–∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ push (–¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏)

```powershell
.\scripts\build-release.ps1 -SkipPush
```

–°—Ç–≤–æ—Ä—é—î commit —ñ tag –ª–æ–∫–∞–ª—å–Ω–æ, –∞–ª–µ –Ω–µ –ø—É—à–∏—Ç—å. –ö–æ—Ä–∏—Å–Ω–æ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ø–µ—Ä–µ–¥ –ø—É–±–ª—ñ–∫–∞—Ü—ñ—î—é.

---

### –ü–∞—Ä–∞–º–µ—Ç—Ä–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–ø–∏—Å |
|----------|-----|------|
| `-NoVersionBump` | switch | –ù–µ —ñ–Ω–∫—Ä–µ–º–µ–Ω—Ç—É–≤–∞—Ç–∏ –≤–µ—Ä—Å—ñ—é |
| `-CreateGitHubRelease` | switch | –°—Ç–≤–æ—Ä–∏—Ç–∏ GitHub Release |
| `-ReleaseNotes` | string | –ö–∞—Å—Ç–æ–º–Ω—ñ release notes (markdown) |
| `-SkipPush` | switch | –ù–µ –ø—É—à–∏—Ç–∏ –¥–æ GitHub (—Ç—ñ–ª—å–∫–∏ –ª–æ–∫–∞–ª—å–Ω–∏–π commit/tag) |

---

### –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è GitHub CLI (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

#### Windows
```powershell
winget install GitHub.cli
```

#### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
```powershell
gh auth login
```

---

### Workflow –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ä–µ–ª—ñ–∑—É

#### –í–∞—Ä—ñ–∞–Ω—Ç 1: –ü—Ä–æ—Å—Ç–∏–π (–±–µ–∑ GitHub Release)

```powershell
# 1. –ó–∞–∫–æ–º—ñ—Ç—å –≤—Å—ñ –ø–æ—Ç–æ—á–Ω—ñ –∑–º—ñ–Ω–∏
git add .
git commit -m "feat: –¥–æ–¥–∞–≤ –Ω–æ–≤—É —Ñ—ñ—á—É"

# 2. –ó–∞–ø—É—Å—Ç–∏ build —Å–∫—Ä–∏–ø—Ç
.\scripts\build-release.ps1

# 3. –ì–æ—Ç–æ–≤–æ! –í–µ—Ä—Å—ñ—è –æ–Ω–æ–≤–ª–µ–Ω–∞ —ñ –∑–∞–ø—É—à–µ–Ω–∞
# 4. –°—Ç–≤–æ—Ä–∏ GitHub Release –≤—Ä—É—á–Ω—É –Ω–∞ https://github.com/Anti-Friz/antifriz-roleplay-stuff/releases
```

#### –í–∞—Ä—ñ–∞–Ω—Ç 2: –ü–æ–≤–Ω–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π

```powershell
# 1. –ó–∞–∫–æ–º—ñ—Ç—å –≤—Å—ñ –ø–æ—Ç–æ—á–Ω—ñ –∑–º—ñ–Ω–∏
git add .
git commit -m "feat: –¥–æ–¥–∞–≤ –Ω–æ–≤—É —Ñ—ñ—á—É"

# 2. –ó–∞–ø—É—Å—Ç–∏ build —Å–∫—Ä–∏–ø—Ç –∑ GitHub Release
.\scripts\build-release.ps1 -CreateGitHubRelease -ReleaseNotes "–û–ø–∏—Å –∑–º—ñ–Ω"

# 3. –ì–æ—Ç–æ–≤–æ! üéâ –ú–æ–¥—É–ª—å –≤–∏–ø—É—â–µ–Ω–∏–π –Ω–∞ GitHub
```

---

### Troubleshooting

#### "GitHub CLI (gh) not found"
```powershell
winget install GitHub.cli
```

#### "Not authenticated with GitHub CLI"
```powershell
gh auth login
```

#### "Version format should be X.Y.Z"
–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Å—è —â–æ –≤ `module.json` –≤–µ—Ä—Å—ñ—è –º–∞—î —Ñ–æ—Ä–º–∞—Ç `"version": "0.0.1"` (3 —á–∏—Å–ª–∞ —á–µ—Ä–µ–∑ –∫—Ä–∞–ø–∫—É).

#### "You have uncommitted changes"
–°–∫—Ä–∏–ø—Ç –∑–Ω–∞–π—à–æ–≤ –Ω–µ–∑–∞–∫–æ–º—ñ—á–µ–Ω—ñ —Ñ–∞–π–ª–∏ (–∫—Ä—ñ–º `module.json`). –ú–æ–∂–µ—à:
- –ó–∞–∫–æ–º—ñ—Ç–∏—Ç–∏ —ó—Ö: `git add . && git commit -m "..."`
- –ê–±–æ –ø—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ —Ä–µ–ª—ñ–∑ –∑ –Ω–∏–º–∏ (—Å–∫—Ä–∏–ø—Ç –∑–∞–ø–∏—Ç–∞—î –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è)

#### "Error pushing to remote"
–ü–µ—Ä–µ–≤—ñ—Ä —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç –∑'—î–¥–Ω–∞–Ω–Ω—è —Ç–∞ –¥–æ—Å—Ç—É–ø –¥–æ GitHub. –ú–æ–∂–Ω–∞ –∑–∞–ø—É—à–∏—Ç–∏ –≤—Ä—É—á–Ω—É:
```powershell
git push && git push --tags
```

---

### –ü—Ä–∏–∫–ª–∞–¥–∏

#### –®–≤–∏–¥–∫–∏–π –ø–∞—Ç—á
```powershell
# –í–∏–ø—Ä–∞–≤–∏–≤ –±–∞–≥, —Ö–æ—á—É —à–≤–∏–¥–∫–æ –≤–∏–ø—É—Å—Ç–∏—Ç–∏ patch
.\scripts\build-release.ps1

# –í–µ—Ä—Å—ñ—è –æ–Ω–æ–≤–ª–µ–Ω–∞, –∑–∞–ø—É—à–µ–Ω–∞, –∞—Ä—Ö—ñ–≤ –≥–æ—Ç–æ–≤–∏–π
# GitHub Release —Å—Ç–≤–æ—Ä–∏ –≤—Ä—É—á–Ω—É –∞–±–æ –¥–æ–¥–∞–π -CreateGitHubRelease
```

#### –ü–æ–≤–Ω–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π —Ä–µ–ª—ñ–∑
```powershell
# –í—Å–µ –æ–¥—Ä–∞–∑—É: –≤–µ—Ä—Å—ñ—è, push, –∞—Ä—Ö—ñ–≤, GitHub Release
.\scripts\build-release.ps1 -CreateGitHubRelease -ReleaseNotes "üêõ Hotfix: –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –∫—Ä–∏—Ç–∏—á–Ω–∏–π –±–∞–≥"
```

#### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–µ—Ä–µ–¥ —Ä–µ–ª—ñ–∑–æ–º
```powershell
# –°—Ç–≤–æ—Ä–∏—Ç–∏ –≤—Å–µ –ª–æ–∫–∞–ª—å–Ω–æ –±–µ–∑ push
.\scripts\build-release.ps1 -SkipPush

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, –ø–æ—Ç—ñ–º –∑–∞–ø—É—à–∏—Ç–∏ –≤—Ä—É—á–Ω—É
git push && git push --tags
```

#### –¢—ñ–ª—å–∫–∏ –∞—Ä—Ö—ñ–≤ (–≤–µ—Ä—Å—ñ—é –≤–∂–µ –æ–Ω–æ–≤–∏–≤ –≤—Ä—É—á–Ω—É)
```powershell
.\scripts\build-release.ps1 -NoVersionBump
```

---

### –í–∞–∂–ª–∏–≤—ñ –Ω—é–∞–Ω—Å–∏

1. **Push –ø–µ—Ä–µ–¥ GitHub Release**: –°–∫—Ä–∏–ø—Ç —Å–ø–æ—á–∞—Ç–∫—É –ø—É—à–∏—Ç—å –∑–º—ñ–Ω–∏, –∞ –ø–æ—Ç—ñ–º —Å—Ç–≤–æ—Ä—é—î release. –¶–µ –≥–∞—Ä–∞–Ω—Ç—É—î —â–æ tag —ñ—Å–Ω—É—î –Ω–∞ GitHub.

2. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–µ–∑–∞–∫–æ–º—ñ—á–µ–Ω–∏—Ö –∑–º—ñ–Ω**: –°–∫—Ä–∏–ø—Ç –ø–æ–ø–µ—Ä–µ–¥–∂–∞—î –ø—Ä–æ –Ω–µ–∑–∞–∫–æ–º—ñ—á–µ–Ω—ñ —Ñ–∞–π–ª–∏ —ñ –¥–∞—î –∑–º–æ–≥—É —Å–∫–∞—Å—É–≤–∞—Ç–∏ —Ä–µ–ª—ñ–∑.

3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è download URL**: –Ø–∫—â–æ `download` –≤ `module.json` –º—ñ—Å—Ç–∏—Ç—å –≤–µ—Ä—Å—ñ—é (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ `/v0.0.1/`), –≤–æ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–Ω–æ–≤–∏—Ç—å—Å—è.

4. **–ë–µ–∑–ø–µ–∫–∞**: –ó `-SkipPush` –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤—Å–µ –ª–æ–∫–∞–ª—å–Ω–æ –ø–µ—Ä–µ–¥ –ø—É–±–ª—ñ–∫–∞—Ü—ñ—î—é.

